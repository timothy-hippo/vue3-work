(function(e){function t(t){for(var c,r,i=t[0],s=t[1],u=t[2],d=0,l=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&l.push(a[r][0]),a[r]=0;for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&(e[c]=s[c]);h&&h(t);while(l.length)l.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],c=!0,r=1;r<n.length;r++){var i=n[r];0!==a[i]&&(c=!1)}c&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var c={},r={app:0},a={app:0},o=[];function i(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2d2086b7":"1e8eaf81","chunk-378034bd":"caf5493b","chunk-44e12390":"68f39d65","chunk-252cd720":"928d0cab","chunk-2d0e2308":"b14895a5","chunk-5caeaaa2":"42b6de05","chunk-7afd838d":"9e45a954","chunk-ad7fbcd0":"1c6ad319","chunk-0ab270b8":"3ad49328","chunk-2d0ab565":"1211fa94","chunk-445d0efa":"b6b86b43"}[e]+".js"}function s(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-252cd720":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var c="css/"+({}[e]||e)+"."+{"chunk-2d2086b7":"31d6cfe0","chunk-378034bd":"31d6cfe0","chunk-44e12390":"31d6cfe0","chunk-252cd720":"7e199fec","chunk-2d0e2308":"31d6cfe0","chunk-5caeaaa2":"31d6cfe0","chunk-7afd838d":"31d6cfe0","chunk-ad7fbcd0":"31d6cfe0","chunk-0ab270b8":"31d6cfe0","chunk-2d0ab565":"31d6cfe0","chunk-445d0efa":"31d6cfe0"}[e]+".css",a=s.p+c,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var u=o[i],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===c||d===a))return t()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){u=l[i],d=u.getAttribute("data-href");if(d===c||d===a)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var c=t&&t.target&&t.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=c,delete r[e],h.parentNode.removeChild(h),n(o)},h.href=a;var b=document.getElementsByTagName("head")[0];b.appendChild(h)})).then((function(){r[e]=0})));var c=a[e];if(0!==c)if(c)t.push(c[2]);else{var o=new Promise((function(t,n){c=a[e]=[t,n]}));t.push(c[2]=o);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=i(e);var l=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(h);var n=a[e];if(0!==n){if(n){var c=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+c+": "+r+")",l.name="ChunkLoadError",l.type=c,l.request=r,n[1](l)}a[e]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},s.m=e,s.c=c,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)s.d(n,c,function(t){return e[t]}.bind(null,c));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var h=d;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),r=n("bc3a"),a=n.n(r),o=n("130e"),i=n("8a14"),s=(n("fe26"),n("cd74"),n("7bb1")),u=n("3aa8"),d=n("cbdf"),l=n("9457");function h(e,t){var n=Object(c["H"])("router-view");return Object(c["x"])(),Object(c["e"])(n)}n("913b");var b=n("6b0d"),f=n.n(b);const p={},g=f()(p,[["render",h]]);var m=g,j=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),O={class:"container"},v={class:"row mt-4"},y={class:"col-md-2"},k={class:"list-group"},x=["onClick"],P={class:"col-md-10"},w={class:"row justify-content-end mb-3 mt-3 mt-md-0"},C={class:"col-12 col-md-4"},_={class:"input-group"},L=Object(c["h"])("span",{class:"input-group-text",id:"basic-addon1"},[Object(c["h"])("i",{class:"bi bi-search"})],-1),E={class:"row"},S={class:"card h-100"},I=["src"],T={class:"card-body"},A={class:"card-title"},M={class:"card-text"},F=Object(c["i"])("  "),$={key:0,class:"text-danger"},K={class:"btn-group btn-group-sm d-flex"},N=["onClick"],U=["disabled","onClick"],q={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},D=Object(c["h"])("span",{class:"visually-hidden"},"Loading...",-1),H=[D],B=Object(c["i"])(" 加到購物車 ");function z(e,t,n,r,a,o){var i=Object(c["H"])("Loading");return Object(c["x"])(),Object(c["g"])(c["a"],null,[Object(c["j"])(i,{active:a.isLoading},null,8,["active"]),Object(c["h"])("div",O,[Object(c["h"])("div",v,[Object(c["h"])("div",y,[Object(c["h"])("ul",k,[Object(c["h"])("li",{class:Object(c["r"])(["list-group-item",{active:""==a.category}])},[Object(c["h"])("a",{class:Object(c["r"])(["text-decoration-none",{"text-white":""==a.category}]),href:"#",onClick:t[0]||(t[0]=function(e){return o.checkCategory("")})},"所有商品",2)],2),(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["F"])(a.categorys,(function(e){return Object(c["x"])(),Object(c["g"])("li",{class:Object(c["r"])(["list-group-item",{active:a.category==e}]),key:e},[Object(c["h"])("a",{class:Object(c["r"])(["text-decoration-none",{"text-white":a.category==e}]),href:"#",onClick:function(t){return o.checkCategory(e)}},Object(c["K"])(e),11,x)],2)})),128))])]),Object(c["h"])("div",P,[Object(c["h"])("div",w,[Object(c["h"])("div",C,[Object(c["h"])("div",_,[L,Object(c["U"])(Object(c["h"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.searchProduct=e}),class:"form-control",placeholder:"請輸入商品名稱","aria-label":"Username","aria-describedby":"basic-addon1"},null,512),[[c["O"],a.searchProduct]])])])]),Object(c["h"])("div",E,[(Object(c["x"])(!0),Object(c["g"])(c["a"],null,Object(c["F"])(o.searchProducts,(function(e){return Object(c["x"])(),Object(c["g"])("div",{class:"col-md-4 mb-3",key:e.id},[Object(c["h"])("div",S,[Object(c["h"])("img",{src:e.imageUrl,style:{width:"100%"}},null,8,I),Object(c["h"])("div",T,[Object(c["h"])("h5",A,Object(c["K"])(e.title),1),Object(c["h"])("p",M,[Object(c["h"])("span",{class:Object(c["r"])(["text-danger",{"text-decoration-line-through":e.price!==e.origin_price,"text-muted":e.price!==e.origin_price}])},Object(c["K"])("$".concat(e.price)),3),F,e.price!==e.origin_price?(Object(c["x"])(),Object(c["g"])("span",$,Object(c["K"])("$".concat(e.origin_price)),1)):Object(c["f"])("",!0)]),Object(c["h"])("div",K,[Object(c["h"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(t){return o.getProduct(e.id)}}," 查看更多 ",8,N),Object(c["h"])("button",{type:"button",class:"btn btn-outline-danger",disabled:a.status.loadingItem==e.id,onClick:function(t){return o.addCart(e.id)}},[a.status.loadingItem==e.id?(Object(c["x"])(),Object(c["g"])("div",q,H)):Object(c["f"])("",!0),B],8,U)])])])])})),128))])])])])],64)}var J=n("2909"),W=(n("99af"),n("159b"),n("4de4"),n("ac1f"),n("466d"),{data:function(){return{isLoading:!1,products:[],status:{loadingItem:""},categorys:[],category:"",filterProducts:[],searchProduct:""}},inject:["emitter"],created:function(){this.getProducts()},methods:{getProducts:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("timothy80617","/products/all");this.axios.get(t).then((function(t){e.products=Object(J["a"])(t.data.products),e.filterProducts=e.products,e.products.forEach((function(t){e.getCategorys(t.category)})),e.isLoading=!1}))},getCategorys:function(e){var t=this.categorys.some((function(t){return t===e}));t||this.categorys.push(e)},checkCategory:function(e){this.category=e,this.filterProducts=""===e?this.products:this.products.filter((function(t){return t.category===e}))},getProduct:function(e){this.$router.push("/user/product/".concat(e))},addCart:function(e){var t=this,n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("timothy80617","/cart"),c={product_id:e,qty:1};this.status.loadingItem=e,this.axios.post(n,{data:c}).then((function(e){t.status.loadingItem="",e.data.success?t.emitter.emit("push-message",{style:"success",title:e.data.message}):t.emitter.emit("push-message",{style:"danger",title:e.data.message})}))}},computed:{searchProducts:function(){var e=this;return this.filterProducts.filter((function(t){return t.title.match(e.searchProduct)}))}}});const V=f()(W,[["render",z]]);var G=V,Q=[{path:"/login",component:function(){return n.e("chunk-2d2086b7").then(n.bind(null,"a55b"))}},{path:"/dashboard",component:function(){return Promise.all([n.e("chunk-44e12390"),n.e("chunk-2d0e2308")]).then(n.bind(null,"7e48"))},children:[{path:"products",component:function(){return Promise.all([n.e("chunk-ad7fbcd0"),n.e("chunk-0ab270b8")]).then(n.bind(null,"e6dc"))}},{path:"coupons",component:function(){return Promise.all([n.e("chunk-ad7fbcd0"),n.e("chunk-445d0efa")]).then(n.bind(null,"f329"))}},{path:"orders",component:function(){return Promise.all([n.e("chunk-ad7fbcd0"),n.e("chunk-2d0ab565")]).then(n.bind(null,"159d"))}}]},{path:"/user",component:function(){return Promise.all([n.e("chunk-44e12390"),n.e("chunk-252cd720")]).then(n.bind(null,"b186"))},children:[{path:"/",name:"Home",component:G},{path:"cart",component:function(){return n.e("chunk-378034bd").then(n.bind(null,"76db"))}},{path:"product/:productId",component:function(){return n.e("chunk-5caeaaa2").then(n.bind(null,"f962"))}},{path:"checkout/:orderId",component:function(){return n.e("chunk-7afd838d").then(n.bind(null,"0959"))}}]}],R=Object(j["a"])({history:Object(j["b"])(),routes:Q,linkActiveClass:"active"}),X=R;n("5319"),n("b680");function Y(e){var t=parseInt(e,10);return"".concat(t.toFixed(0).replace(/./g,(function(e,t,n){return t&&"."!==e&&(n.length-t)%3===0?", ".concat(e).replace(/\s/g,""):e})))}function Z(e){var t=new Date(1e3*e);return t.toLocaleDateString()}function ee(){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("timothy80617","/cart");a.a.get(e).then((function(e){return e.data.data.carts.length}))}n("a15b");var te=n("cfb9"),ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"更新";if(e.success)te["a"].emit("push-message",{style:"success",title:"".concat(t,"成功")});else{var n="string"===typeof e.message?[e.message]:e.message;te["a"].emit("push-message",{style:"danger",title:"".concat(t,"失敗"),content:n.join("、")})}};Object(s["e"])("required",u["c"]),Object(s["e"])("email",u["a"]),Object(s["e"])("min",u["b"]),Object(s["d"])({generateMessage:Object(d["a"])({zh_TW:l}),validateOnInput:!0}),Object(d["b"])("zh_TW");var ce=Object(c["d"])(m);ce.config.globalProperties.$filters={currency:Y,date:Z},ce.config.globalProperties.$cartsTotal=ee,ce.config.globalProperties.$pushMessageState=ne,ce.use(o["a"],a.a),ce.use(X),ce.component("Loading",i["a"]),ce.component("Form",s["c"]),ce.component("Field",s["b"]),ce.component("ErrorMessage",s["a"]),ce.mount("#app")},"913b":function(e,t,n){"use strict";n("ffa4")},cfb9:function(e,t,n){"use strict";var c=n("1344"),r=Object(c["a"])();t["a"]=r},ffa4:function(e,t,n){}});
//# sourceMappingURL=app.f9c5dc81.js.map